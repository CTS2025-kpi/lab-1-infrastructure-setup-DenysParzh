AWSTemplateFormatVersion: '2010-09-09'
Description: Role with custom policy

Resources:
  OnlyReaderPolicyCF:
    Type: AWS::IAM::ManagedPolicy
    Properties:
      ManagedPolicyName: OnlyReaderPolicyCF
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
          - Effect: Allow
            Action:
              - s3:ListBucket
              - s3:GetObject
            Resource: '*'

  OnlyReaderRoleCF:
    Type: AWS::IAM::Role
    Properties:
      RoleName: OnlyReaderRoleCF
      AssumeRolePolicyDocument:
        Version: '2012-10-17'
        Statement:
          - Effect: Allow
            Principal:
              AWS: !Sub arn:aws:iam::${AWS::AccountId}:root
            Action: sts:AssumeRole

      ManagedPolicyArns:
        - !Ref OnlyReaderPolicyCF